package org.testeditor.rcp4

import org.testeditor.fixture.swt.*
import org.testeditor.fixture.eclipse.*
import org.testeditor.fixture.swt.SWTBotViewLocatorStrategy

interaction type createSimpleProject {
	label = "Create simple project"
	template = "Create simple project"
	method = TestEditorFixture.createDemoProject
}

interaction type cleanWorkspace {
	label = "Clean Workspace content"
	template = "Clean Workspace"
	method = TestEditorFixture.cleanWorkspace
}

interaction type restartApp {
	label = "Clean restart Test-Editor"
	template = "Reset UI State"
	method = TestEditorFixture.resetApplication
}

interaction type isValidTestProject {
	template = "Check if" ${projectName} "is a valid testproject"
	method = TestEditorFixture.isValidProject(projectName)
}

component type TestEditorApp {
	interactions = createSimpleProject, restartApp, cleanWorkspace, isValidTestProject
}

component HauptFenster is General {

	element ProjektBaum is View {
		label = "Project Explorer"
		locator = "Test Project Explorer"
	}
	
	element TestStepSelector is View {
		label = "Test Step Selector"
		locator = "Test Step Selector"
	}
	
	element JUnitView is View {
		locator = "org.eclipse.jdt.junit.ResultView"
		locatorStrategy = VIEW_ID
	}

}

value-space projectmenues = #[ "New/Project...", "Open", "Run As/1 Test", "Rename...", "New/Test Case" ]

component ProjectExplorer is General {
	element ProjektBaum is TreeView { // TODO english!
		label = "Project Explorer"
		locator = "Test Project Explorer"
		executeContextMenuEntry.item restrict to projectmenues
	}
}

component TestEditor is TestEditorApp {
}

component Workbench is Workbench {
}

component NewProjectDialog is Dialog {
	element ProjectType is Tree {
		label = "Project Type Tree"
		locator = "[Single]"
	}
	element NextButton is Button {
		label = "Next Button"
		locator = "[Label]&Next >"
	}
	element FinishButton is Button {
		label = "Finish Button"
		locator = "[Label]&Finish"
	}
	element ProjectName is Text {
		label = "Project Name"
		locator = "[Single]"
	}
	element AddFixtureButton is Button {
		label = "Add Fixture Button"
		locator = "[ID]NEW_DIALOG_ADD_SELECTED_FIXTURE"
	}
	element AvailableFixturesList is List {
		label = "Available fixtures list"
		locator = "[ID]NEW_DIALOG_AVAILABLE_FIXTURE_LIST"
	}
	
	element GenerateWithExamples is CheckBox {
		locator = "NEW_DIALOG_GENERATE_WITH_EXAMPLES"
	}

	element BuildTool is Combobox {
		locator = "[ID]NEW_DIALOG_BUILD_TOOL_COMBO"
	}
}

component NewTestCaseDialog is Dialog{
	element TestCaseName is Text {
		label = "Testcase name"
		locator = "[Label]File name:"
	}
	element NextButton is Button {
		label = "Next Button"
		locator = "[Label]&Next >"
	}
	element FinishButton is Button {
		label = "Finish Button"
		locator = "[Label]&Finish"
	}
	
}

component RenameDialog is Dialog {
	element ElementName is Text {
		locator = "[Single]"
	}
	element OK is Button {
		locator = "[Label]OK"
	}
}